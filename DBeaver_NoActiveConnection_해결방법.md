# DBeaver "No active connection" 오류 해결 방법

## 문제 상황
- 데이터베이스 연결은 성공 (녹색 아이콘)
- 하지만 SELECT 문 실행 시 "No active connection" 오류 발생

## 원인 분석

### 1. SQL 편집기에서 연결이 선택되지 않음 (가장 흔한 원인)
DBeaver에서 데이터베이스 연결과 SQL 편집기는 **별개**입니다.
- 데이터베이스 탐색기에서 연결이 활성화되어 있어도
- SQL 편집기에서는 별도로 연결을 선택해야 합니다

### 2. SQL 편집기가 다른 연결을 참조
- 여러 연결이 있을 때 잘못된 연결을 선택했을 수 있습니다
- 또는 연결이 끊어진 상태일 수 있습니다

### 3. SQL 편집기 컨텍스트 문제
- SQL 편집기가 특정 데이터베이스/스키마에 연결되지 않음
- 트랜잭션 모드 설정 문제

## 해결 방법

### 방법 1: SQL 편집기에서 연결 선택 (가장 중요!)

1. **SQL 편집기 상단 확인**
   - SQL 편집기 상단에 연결 드롭다운이 있습니다
   - 이 드롭다운에서 올바른 연결을 선택하세요
   - 예: `loandoc (postgres@localhost:5432)`

2. **연결이 선택되지 않은 경우**
   - 드롭다운을 클릭하여 연결 목록 확인
   - 올바른 연결 선택 (loandoc 데이터베이스)

3. **연결이 회색으로 표시되는 경우**
   - 연결이 비활성화된 상태입니다
   - 연결을 더블클릭하여 활성화하거나
   - 드롭다운에서 연결을 다시 선택

### 방법 2: SQL 편집기에서 우클릭 메뉴 사용

1. SQL 편집기 내에서 **우클릭**
2. **"연결 변경"** 또는 **"Set Connection"** 선택
3. 올바른 연결 선택

### 방법 3: 새 SQL 스크립트를 연결과 함께 열기

1. 데이터베이스 탐색기에서 연결을 **우클릭**
2. **SQL 편집기** → **새 SQL 스크립트** 선택
3. 이렇게 열면 자동으로 해당 연결이 선택됩니다

### 방법 4: SQL 편집기 하단 상태바 확인

1. SQL 편집기 하단 상태바 확인
2. 연결 정보가 표시되는지 확인
3. 연결 정보가 없거나 회색이면 연결이 선택되지 않은 것입니다

## 확인 방법

### SQL 편집기에서 연결이 선택되었는지 확인:
1. SQL 편집기 상단 드롭다운 확인
2. 연결 이름이 표시되고 활성화되어 있는지 확인
3. 연결 이름 옆에 녹색 점이 있는지 확인

### 테스트 쿼리:
```sql
-- 연결 테스트
SELECT current_database(), current_user;

-- 이 쿼리가 실행되면 연결이 정상입니다
```

## 추가 팁

### SQL 편집기 설정 확인:
1. **Window** → **Preferences** → **DBeaver** → **SQL Editor**
2. **Auto-commit** 설정 확인
3. **Transaction isolation** 설정 확인

### 연결 설정 확인:
1. 연결을 우클릭 → **Edit Connection**
2. **Main** 탭에서 연결 정보 확인
3. **Test Connection** 버튼으로 연결 테스트

## 일반적인 시나리오

### 시나리오 1: 데이터베이스 탐색기에서 테이블을 우클릭하여 "View Data" 선택
- ✅ 자동으로 연결이 선택됨
- ✅ 정상 작동

### 시나리오 2: SQL 편집기를 직접 열어서 쿼리 작성
- ❌ 연결이 선택되지 않음
- ✅ 해결: 상단 드롭다운에서 연결 선택

### 시나리오 3: 여러 연결이 있을 때
- ❌ 잘못된 연결 선택
- ✅ 해결: 올바른 연결(loandoc) 선택

## 요약

**핵심**: DBeaver에서 데이터베이스 연결과 SQL 편집기는 별개입니다.
- 데이터베이스 탐색기에서 연결 활성화 ≠ SQL 편집기에서 연결 선택
- **SQL 편집기 상단의 연결 드롭다운에서 올바른 연결을 반드시 선택해야 합니다**

